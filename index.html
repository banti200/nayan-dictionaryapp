<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nayankumar Dictionary App</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #4b6cb7, #182848);
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .card {
      background: rgba(255, 255, 255, 0.1);
      padding: 20px;
      border-radius: 15px;
      text-align: center;
      width: 350px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    }
    input {
      padding: 10px;
      width: 90%;
      border: none;
      border-radius: 8px;
      margin: 8px 0;
      text-align: center;
    }
    button {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      background: #e08b0a;
      color: #fff;
      cursor: pointer;
      margin-top: 10px;
    }
    button:hover { background: #e67e00; }
    #result { margin-top: 15px; text-align: left; }
    footer { margin-top: 10px; font-size: 12px; color: #ddd; }
  </style>
</head>
<body>
  <!-- Signup Page -->
  <div class="card" id="signupPage">
    <h2>üîë Sign Up</h2>
    <input type="text" id="name" placeholder="Enter your Name"><br>
    <input type="text" id="qualification" placeholder="Enter Qualification"><br>
    <input type="email" id="email" placeholder="Enter Email"><br>
    <button onclick="signUp()">Sign Up</button>
    <p id="signupMsg"></p>
    <footer>üîí Your details are confidential</footer>
  </div>

  <!-- Login Page -->
  <div class="card" id="loginPage" style="display:none;">
    <h2>üîê Login</h2>
    <input type="email" id="loginEmail" placeholder="Enter Email"><br>
    <input type="password" id="accessCode" placeholder="Enter Access Code"><br>
    <button onclick="login()">Login</button>
    <p id="loginMsg"></p>
  </div>

  <!-- Dictionary Page -->
  <div class="card" id="dictionaryPage" style="display:none;">
    <h2>üìñ Nayankumar Dictionary</h2>
    <input type="text" id="word" placeholder="Enter a word">
    <button onclick="getDefinition()">Search</button>
    <button onclick="resetDict()">Reset</button>
    <button onclick="exitApp()">Exit</button>
    <div id="result"></div>
    <footer>Made with ‚ù§Ô∏è by Nayankumar</footer>
  </div>

  <script>
    const ACCESS_CODE = "9999"; // same for all users

    function signUp() {
      let name = document.getElementById("name").value.trim();
      let qualification = document.getElementById("qualification").value.trim();
      let email = document.getElementById("email").value.trim();
      let msg = document.getElementById("signupMsg");

      if (!/^[a-zA-Z ]+$/.test(name)) {
        msg.innerHTML = "‚ö† Enter a valid name (letters only)";
        return;
      }
      if (!qualification) {
        msg.innerHTML = "‚ö† Qualification required";
        return;
      }
      if (!/^[^ ]+@[^ ]+\.[a-z]{2,3}$/.test(email)) {
        msg.innerHTML = "‚ö† Enter a valid email";
        return;
      }

      localStorage.setItem("userEmail", email);
      msg.innerHTML = `‚úÖ Registered! Use Access Code: <b>${ACCESS_CODE}</b> to login.`;

      setTimeout(() => {
        document.getElementById("signupPage").style.display = "none";
        document.getElementById("loginPage").style.display = "block";
      }, 2000);
    }

    function login() {
      let loginEmail = document.getElementById("loginEmail").value.trim();
      let accessCode = document.getElementById("accessCode").value.trim();
      let storedEmail = localStorage.getItem("userEmail");
      let msg = document.getElementById("loginMsg");

      if (loginEmail === storedEmail && accessCode === ACCESS_CODE) {
        msg.innerHTML = "‚úÖ Login Successful!";
        setTimeout(() => {
          document.getElementById("loginPage").style.display = "none";
          document.getElementById("dictionaryPage").style.display = "block";
        }, 1000);
      } else {
        msg.innerHTML = "‚ùå Invalid Email or Access Code!";
      }
    }

    async function getDefinition() {
      const word = document.getElementById("word").value.trim();
      const resultDiv = document.getElementById("result");

      if (!word) {
        resultDiv.innerHTML = "‚ö† Please enter a word!";
        return;
      }

      try {
        const url = `https://api.dictionaryapi.dev/api/v2/entries/en/${word}`;
        const response = await fetch(url);
        const data = await response.json();

        if (data[0]) {
          let meaning = data[0].meanings[0].definitions[0].definition;
          let example = data[0].meanings[0].definitions[0].example || "No example available";
          let phonetic = data[0].phonetics[0]?.text || "Not available";
          let audio = data[0].phonetics.find(p => p.audio) ? data[0].phonetics.find(p => p.audio).audio : "";

          resultDiv.innerHTML = `
            <div><b>Word:</b> ${word}</div>
            <div><b>Pronunciation:</b> ${phonetic} ${audio ? `<button onclick="playAudio('${audio}')">üîä</button>` : ""}</div>
            <div><b>Meaning:</b> ${meaning}</div>
            <div><b>Example:</b> ${example}</div>
          `;
        } else {
          resultDiv.innerHTML = "‚ùå Word not found!";
        }
      } catch {
        resultDiv.innerHTML = "‚ùå Error fetching definition.";
      }
    }

    function playAudio(audioUrl) {
      let audio = new Audio(audioUrl);
      audio.play();
    }

    function resetDict() {
      document.getElementById("word").value = "";
      document.getElementById("result").innerHTML = "";
    }

    function exitApp() {
      localStorage.clear();
      alert("üëã You have exited the app. Stay safe, your data is cleared.");
      document.getElementById("dictionaryPage").style.display = "none";
      document.getElementById("signupPage").style.display = "block";
    }
  </script>
</body>
</html>
